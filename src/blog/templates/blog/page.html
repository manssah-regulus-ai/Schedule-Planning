{% extends 'projetplanning/base.html' %}
{% block content %}

    <!-- Inclure jQuery depuis un CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Votre script jQuery pour la mise à jour automatique -->
    <script>
        $(document).ready(function () {
            // Détecter les changements dans la liste déroulante et soumettre le formulaire
            $('select[name="magasin"]').on('change', function () {
                $(this).closest('form').submit();
            });
        });
    </script>

<style>
  /* Style du formulaire */

  /* Style de la liste déroulante */
  select {
    width: 190px;
    height: 30px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #fff; /* Couleur de fond de la liste déroulante */
    font-size: 16px;
  }

  /* Style du bouton */
  .button-link {
    width: 190px;
    height: 30px;
    margin-left: 25px;
    margin-top:5px;
    display: inline-block;
    background-color: hsla(50, 33%, 25%, .6); /* Couleur de fond du bouton */
    color: #fff; /* Couleur du texte du bouton */
    text-decoration: none; /* Supprime les soulignements de lien */
    border: 1px solid hsla(50, 33%, 50%, .6); /* Bordure du bouton */
    border-radius: 5px;
    cursor: pointer;
    text-align: center;
    line-height: 27px;
  }

  /* Lorsque le bouton est survolé */
  .button-link:hover {
    background-color: #0056b3; /* Couleur de fond au survol */
    border: 1px solid #0056b3; /* Bordure au survol */
  }

</style>



<body class="background" style="background-color: hsla(50, 33%, 25%, .75)">

<div style="display: flex; height: 100%;">

  <!-- Colonne de gauche pour les filtres -->
  <div style="width: 18%; background-color: hsla(50, 33%, 95%, .92); ">
    <p style="margin-top: 35px;margin-left: 25px">Filtrer par magasin : </p>
    <form method="get" style="  width: 100%; border-radius:5px; ;margin-left: 25px">
       {{ form.magasin }}
    </form>

      <a href="/admin" class="button-link">Ajouter un collaborateur</a>
  </div>

  <!-- Colonne de droite pour les collaborateurs -->
  <div style="display: flex; flex-wrap: wrap; align-content: start; background-color: hsla(50, 33%, 95%, .92);
  height: 100%; text-align: center; justify-content: center; align-items: center; flex: 1;">

    {% for collaborator in collaborator %}
      <div style="display: inline-block; text-align: center; margin: 10px; width: 170px; height: 270px; padding: 10px;
      border: 1px solid #ccc; border-radius:5px; background-color: rgba(250, 250, 249, 0.5)">
        {% if collaborator.thumbnail %}
        <div style="height: 200px;"><img src="{{ collaborator.thumbnail.url }}" style="max-width: 150px; max-height: 200px;"></div>
        {% else %}
        <div style="height: 200px; justify-content: center;"><em>Image non disponible</em></div>
        {% endif %}
          <div style="width: 100%; margin-top: 10px;"> <a href="{% url 'detail' slug=collaborator.slug %}"
          style="color: black; text-decoration: none;">
              {{ collaborator.name }}</a></div>
          <div style="width: 100%; margin-top: 10px;">{{ collaborator.job }}</div>
      </div>

    {% endfor %}
  </div>
</div>

</body>
{% endblock %}
